<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>★청년버팀목대출 월 이자금액 계산기</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 720px;
      margin: 0 auto;
      padding: 20px;
      background: #f9fafb;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 8px;
    }
    .sub {
      font-size: 13px;
      color: #555;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 14px;
      font-weight: 600;
    }
    input[type="number"] {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      margin-top: 6px;
    }
    .checkbox-group label {
      font-weight: normal;
      margin-top: 6px;
    }
    button {
      margin-top: 24px;
      width: 100%;
      padding: 14px;
      font-size: 16px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .result {
      margin-top: 28px;
      padding: 16px;
      background: white;
      border-radius: 8px;
      line-height: 1.7;
    }
    .result strong {
      color: #111827;
    }
  </style>
</head>

<body>

<h1>★청년버팀목대출 월 이자금액 계산기</h1>
<div class="sub">
  전세금의 최대 80% 대출 가능하며, 심사 결과에 따라 달라질 수 있음
</div>

<label>연소득금액 (부부합산, 원)</label>
<input id="income" type="number" placeholder="예: 60000000" />

<label>전세금 (원)</label>
<input id="deposit" type="number" placeholder="예: 250000000" />

<div class="checkbox-group">
  <label><input type="checkbox" /> 지방 소재 주택</label>
  <label><input type="checkbox" /> 기초생활수급·차상위</label>
  <label><input type="checkbox" /> 한부모가구</label>
  <label><input type="checkbox" /> 장애인·다문화·노인부양·고령자가구</label>
  <label>다자녀가구 (자녀수 입력)</label>
  <input type="number" placeholder="예: 2" />
  <label><input type="checkbox" /> 주거안정 월세대출 성실납부</label>
  <label><input type="checkbox" /> 부동산 전자계약</label>
  <label><input type="checkbox" /> 만 25세 미만 단독세대주</label>
  <label><input type="checkbox" /> 중소기업 취업·창업 청년</label>
  <label><input type="checkbox" /> 대출신청금액이 전세금의 30% 이하</label>
</div>

<button onclick="calculate()">계산하기</button>

<div class="result">
  <p>월 이자금액: <strong id="monthlyInterest">-</strong></p>
  <p>기존 금리: <strong id="baseRate">-</strong></p>
  <p>우대금리 적용 후: <strong id="finalRate">-</strong></p>
  <p>본인 투입금액: <strong id="selfMoney">-</strong></p>
</div>

<script>
const WEB_APP_URL =
  "https://script.google.com/macros/s/AKfycbzGNZnXwUjSw2ZeUGzXNxNH-RE1Y9_7CsYbB4nJZTWEfJhyspMXuYF96Byxxy9l0-DrHg/exec";

async function calculate() {
  const income = Number(document.getElementById("income").value);
  const deposit = Number(document.getElementById("deposit").value);

  if (income > 75000000 || deposit > 300000000) {
    alert("소득 또는 전세금 기준 초과로 계산할 수 없습니다.");
    return;
  }

  try {
    const res = await fetch(WEB_APP_URL);
    const data = await res.json();

    document.getElementById("baseRate").innerText = data.baseRate;
    document.getElementById("finalRate").innerText = data.finalRate;
    document.getElementById("selfMoney").innerText = data.selfMoney;

    // 월 이자 계산
    const loan = deposit * 0.8;
    const rate = parseFloat(data.finalRate) / 100;
    const monthlyInterest = Math.round((loan * rate) / 12);

    document.getElementById("monthlyInterest").innerText =
      monthlyInterest.toLocaleString() + "원";

  } catch (e) {
    alert("계산 중 오류가 발생했습니다.");
    console.error(e);
  }
}
</script>

</body>
</html>
