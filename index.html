<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>청년버팀목대출 계산기</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

<style>
/* ====== CSS ====== */
body {
  margin: 0;
  font-family: 'Inter', 'Apple SD Gothic Neo', sans-serif;
  background: #f9fafb;
  color: #111;
}
.wrap {
  max-width: 420px;
  margin: auto;
  padding: 24px 16px;
}
h1 {
  font-size: 22px;
  margin-bottom: 4px;
}
.desc {
  font-size: 13px;
  color: #888;
  margin-bottom: 20px;
}
.card {
  background: #fff;
  border-radius: 14px;
  padding: 18px;
  margin-bottom: 14px;
  box-shadow: 0 6px 14px rgba(0,0,0,.04);
}
label {
  display: block;
  font-size: 13px;
  margin-top: 12px;
}
input {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid #eee;
  font-size: 15px;
}
.chk {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  margin: 10px 0;
}
button {
  width: 100%;
  padding: 16px;
  background: #111;
  color: #fff;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 600;
  margin: 20px 0;
}
.result {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 8px 18px rgba(0,0,0,.06);
  display: none;
}
.result .main {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.result .main strong {
  font-size: 26px;
}
.result .sub {
  margin-top: 16px;
  font-size: 14px;
  color: #444;
}
.result .sub div {
  margin-top: 6px;
}
.warn {
  text-align: center;
  color: #d93025;
  font-size: 13px;
}
.credit {
  text-align: center;
  font-size: 11px;
  color: #aaa;
  margin-top: 16px;
}
</style>
</head>

<body>

<div class="wrap">

  <h1>청년버팀목대출 계산기</h1>
  <p class="desc">내 조건이면 월 이자 얼마나 나올까?</p>

  <div class="card">
    <label>연소득 (원)</label>
    <input id="income" placeholder="예: 45,000,000">

    <label>전세금 (원)</label>
    <input id="jeonse" placeholder="예: 260,000,000">

    <label>자녀수 (명)</label>
    <input id="children" type="number" placeholder="예: 1">
  </div>

  <div class="card">
    <h2 style="font-size:15px">금리 우대</h2>

    <label class="chk"><input type="checkbox" id="basic"> 기초·차상위</label>
    <label class="chk"><input type="checkbox" id="single"> 한부모가구</label>
    <label class="chk"><input type="checkbox" id="weak"> 취약가구</label>

    <hr>

    <label class="chk"><input type="checkbox" id="rent"> 월세 성실납부</label>
    <label class="chk"><input type="checkbox" id="econtract"> 전자계약</label>
    <label class="chk"><input type="checkbox" id="young"> 25세 미만 단독</label>
    <label class="chk"><input type="checkbox" id="company"> 중소기업 청년</label>
    <label class="chk"><input type="checkbox" id="thirty"> 대출 30% 이하</label>
    <label class="chk"><input type="checkbox" id="local"> 지방 주택</label>
  </div>

  <button onclick="calc()">계산하기</button>

  <p id="warn" class="warn"></p>

  <div id="result" class="result">
    <div class="main">
      <span>월 이자</span>
      <strong id="interest">0원</strong>
    </div>

    <div class="sub">
      <div>기존 금리 <b id="baseRate">0.0%</b></div>
      <div>우대 적용 <b id="finalRate">0.0%</b></div>
      <div>본인 투입금액 <b id="selfMoney">0원</b></div>
    </div>

    <p id="detail"></p>
  </div>

  <p class="credit">ⓒ 계산기 제작 · 년기</p>

</div>

<script>
/* ====== JS ====== */
const WEB_APP_URL = "https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLj6GRxx6W5LXtTXdu_TPVp-HglxTwKDif3TyRJpzpu1nq2jnDsY8IlH4NkTU8mKGXbBszjjXaPf-YGkhiT9WpYJJvjczDP9IbBMr1WHj1y1_Q_hLocYl_cQ8pfA4QNiX3LjBPXOARuq4kodVhHYdx_JyK94TqWQC4yoAQBLc8gtCH2TEmxE2W8VpeteYXmeAN5SJSVizGD3ZACokcnHOU3BBGTXIM9UqyRejZqu41G9MWSTERHwEwuuaV-JAe_PSLS7fWslrNBVkvx-S2_SI589wST5XQ&lib=McujhMwZSXAj5r31WpYZO14Lq-ofEAQ5F";

function comma(x){
  return x.toLocaleString();
}

async function calc(){
  warn.innerText="";
  result.style.display="none";

  const incomeVal = Number(income.value.replace(/,/g,""));
  const jeonseVal = Number(jeonse.value.replace(/,/g,""));
  const child = Number(children.value || 0);

  if(incomeVal > 75000000 || jeonseVal > 300000000){
    warn.innerText = "연소득 7,500만원 또는 전세금 3억원 초과 시 계산 불가";
    return;
  }

  try{
    const res = await fetch(WEB_APP_URL);
    const data = await res.json();

    let base = data.baseRate;
    let discount = 0;

    if(basic.checked && incomeVal <= 40000000) discount = Math.max(discount, 1.0);
    if(single.checked && incomeVal <= 50000000) discount = Math.max(discount, 1.0);
    if(weak.checked) discount = Math.max(discount, 0.2);

    if(child >= 1){
      discount = Math.max(discount,
        child === 1 ? 0.3 : child === 2 ? 0.5 : 0.7
      );
    }

    if(rent.checked) discount += 0.2;
    if(econtract.checked) discount += 0.1;
    if(young.checked) discount += 0.3;
    if(company.checked) discount += 0.3;
    if(thirty.checked) discount += 0.2;
    if(local.checked) discount += 0.2;

    let final = base - discount;
    if(final < 1.0) final = 1.0;

    const loan = jeonseVal * 0.8;
    const monthly = Math.floor((loan * (final / 100)) / 12);
    const self = jeonseVal - loan;

    interest.innerText = comma(monthly) + "원";
    baseRate.innerText = base.toFixed(1) + "%";
    finalRate.innerText = final.toFixed(1) + "%";
    selfMoney.innerText = comma(self) + "원";

    result.style.display = "block";
  } catch(e){
    warn.innerText = "계산 중 오류가 발생했습니다.";
  }
}
</script>

</body>
</html>
