<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>청년버팀목대출 계산기</title>

<style>
  body {
    margin: 0;
    background: #f2f4f6;
    font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
  }

  .wrap {
    max-width: 480px;
    margin: 0 auto;
    padding: 20px;
  }

  .card {
    background: #fff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 24px rgba(0,0,0,.06);
    margin-bottom: 16px;
  }

  h1 { font-size: 20px; margin-bottom: 6px; }
  .sub { font-size: 13px; color: #777; margin-bottom: 16px; }

  label { font-size: 13px; color: #555; display: block; margin-top: 12px; }

  input {
    width: 100%;
    padding: 14px;
    margin-top: 6px;
    font-size: 15px;
    border-radius: 12px;
    border: 1px solid #ddd;
    box-sizing: border-box;
  }

  .check-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 12px;
  }

.check-item {
  font-size: 14px;
}

.check-item label {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

  button {
    width: 100%;
    margin-top: 20px;
    padding: 16px;
    border: none;
    border-radius: 14px;
    background: #2d7cff;
    color: #fff;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
  }

  .warn {
    color: #e33;
    font-size: 13px;
    margin-top: 10px;
    min-height: 18px;
  }

  .result {
    background: #f0f8ff;
    border-radius: 16px;
    padding: 20px;
    margin-top: 16px;
    opacity: 0;
    transform: scale(0.96);
    transition: all 0.25s ease;
  }

  .result.show {
    opacity: 1;
    transform: scale(1);
  }

.highlight {
  font-size: 34px;
  font-weight: 900;
  color: #2d7cff;
  margin-bottom: 16px;
  letter-spacing: -0.5px;
}

  .result div {
    margin: 6px 0;
    font-size: 15px;
  }

  .blog-note {
    font-size: 12px;
    color: #555;
    margin-top: 14px;
    line-height: 1.5;
  }

  .blog-note a {
    color: #2d7cff;
    font-weight: 600;
    text-decoration: none;
  }

  #loadingOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(255,255,255,0.85);
    z-index: 999;
    justify-content: center;
    align-items: center;
    font-size: 18px;
    font-weight: 700;
    color: #2d7cff;
  }
</style>
</head>

<body>
<div class="wrap">

  <div class="card">
    <h1>청년버팀목대출 계산기</h1>
    <div class="sub">내 조건이면 월 이자 얼마나 나올까?</div>

    <label>연소득 (원)</label>
    <input id="income" type="text" placeholder="예: 40,000,000" />

    <label>전세금 (원)</label>
    <input id="jeonse" type="text" placeholder="예: 130,000,000" />

    <label>자녀수 (명)</label>
    <input id="children" type="number" placeholder="예: 1" />

    <label>금리 우대</label>
    <div class="check-group">
      <div class="check-item">
      <label>
<input type="checkbox" id="basic">기초·차상위
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="single">한부모가구
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="weak">취약가구
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="rent">월세 성실납부
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="econtract">전자계약
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="young">25세 미만 단독
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="company">중소기업 청년
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="thirty">대출 30% 이하
</label>
</div>
      <div class="check-item">
<label>
<input type="checkbox" id="local">지방 주택
</label>
</div>
    </div>

    <button onclick="calc()">계산하기</button>
    <div class="warn" id="warn"></div>
  </div>

  <div class="card result" id="result">
    <div class="highlight">월 이자 <span id="interest"></span></div>
    <div>기준금리: <span id="baseRate"></span></div>
    <div>우대금리: <span id="discountRate"></span></div>
    <div>최종금리: <span id="finalRate"></span></div>
    <div>본인 투입금액: <span id="selfMoney"></span></div>
    <div id="detail"></div>

    <div class="blog-note">
      본 계산기는 <strong>일시상환 기준 참고용</strong>입니다.<br>
      실제 대출 가능 금액·금리는 은행 심사 결과에 따라 달라질 수 있으며,
      계산 기준 및 상세 설명은
      <a href="https://m.blog.naver.com/mooonda" target="_blank">블로그</a>에서 확인해 주세요.
    </div>
  </div>

</div>

<div id="loadingOverlay">계산 중…</div>

<script>
function getBaseRate(income){
  if(income <= 20000000) return 2.0;
  if(income <= 40000000) return 2.5;
  if(income <= 60000000) return 2.9;
  return 3.1;
}

const comma = n => n.toLocaleString();

["income","jeonse"].forEach(id=>{
  document.getElementById(id).addEventListener("input", e=>{
    let v = e.target.value.replace(/[^0-9]/g,"");
    if(v) e.target.value = comma(Number(v));
  });
});

function calc(){
  document.getElementById("loadingOverlay").style.display = "flex";
  warn.innerText = "";

  const incomeVal = Number(income.value.replace(/,/g,""));
  const jeonseVal = Number(jeonse.value.replace(/,/g,""));
  const child = Number(children.value || 0);

  if(incomeVal > 75000000 || jeonseVal > 300000000){
    warn.innerText = "연소득 7,500만원 또는 전세금 3억원 초과 시 계산 불가";
    document.getElementById("loadingOverlay").style.display = "none";
    return;

r.scrollIntoView({ behavior: "smooth", block: "start" });
  }

  let base = getBaseRate(incomeVal);
  let discount = 0;
  let applied = [];

  let candidates = [];
  if(basic.checked && incomeVal <= 40000000) candidates.push({v:1.0,t:"기초·차상위"});
  if(single.checked && incomeVal <= 50000000) candidates.push({v:1.0,t:"한부모"});
  if(weak.checked) candidates.push({v:0.2,t:"취약가구"});
  if(child>=1){
    const v = child===1?0.3:child===2?0.5:0.7;
    candidates.push({v:v,t:`다자녀(${child}명)`});
  }

  if(candidates.length){
    candidates.sort((a,b)=>b.v-a.v);
    discount += candidates[0].v;
    applied.push(candidates[0].t);
  }

  if(rent.checked){discount+=0.2; applied.push("월세 성실납부");}
  if(econtract.checked){discount+=0.1; applied.push("전자계약");}
  if(young.checked){discount+=0.3; applied.push("25세 미만 단독");}
  if(company.checked){discount+=0.3; applied.push("중소기업 청년");}
  if(thirty.checked){discount+=0.2; applied.push("대출 30% 이하");}
  if(local.checked){discount+=0.2; applied.push("지방 주택");}

  let max = 0.5;
  if(applied.includes("기초·차상위") || applied.includes("한부모")) max = 1.0;
  else if(child>=1) max = 0.7;
  discount = Math.min(discount, max);

  let final = Math.max(base - discount, 1.0);

  let loan = jeonseVal * 0.8;
  if(loan > 150000000) loan = 150000000;

  const monthly = Math.floor((loan * (final / 100)) / 12);
  const selfMoneyCalc = jeonseVal - loan;

  result.classList.add("show");
  interest.innerText = comma(monthly) + "원";
  baseRate.innerText = base.toFixed(1) + "%";
  discountRate.innerText = discount.toFixed(1) + "%p";
  finalRate.innerText = final.toFixed(1) + "%";
  selfMoney.innerText = comma(selfMoneyCalc) + "원";
  detail.innerText = "우대 적용: " + (applied.length ? applied.join(", ") : "없음");

  document.getElementById("loadingOverlay").style.display = "none";
}
</script>
</body>
</html>
