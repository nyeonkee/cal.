<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>청년버팀목대출 월 이자금액 계산기</title>

<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR";background:#f4f4f4;padding:16px}
.wrap{background:#fff;max-width:560px;margin:auto;padding:20px;border-radius:10px}
h1{font-size:20px}
.desc{font-size:13px;color:#666;margin-bottom:14px}
label{display:block;margin-top:12px;font-weight:600}
input[type=text],input[type=number]{width:100%;padding:10px;font-size:16px;margin-top:6px}
.chk{margin-top:6px}
button{width:100%;margin-top:20px;padding:14px;font-size:16px;background:#2f80ed;color:#fff;border:none;border-radius:8px}
.result{margin-top:20px;border-top:1px solid #ddd;padding-top:12px;line-height:1.7}
.warn{color:red;margin-top:12px}
.small{font-size:12px;color:#777}
</style>
</head>

<body>
<div class="wrap">
<h1>청년버팀목대출 월 이자금액 계산기</h1>
<div class="desc">
전세금의 최대 80%까지 대출 가능하며, 실제 은행 심사에 따라 적격,대출 금액 등 결과가 달라질 수 있습니다.
</div>

<label>연소득 (부부합산, 원)</label>
<input type="text" id="income" placeholder="예: 40,000,000">

<label>전세금 (원)</label>
<input type="text" id="jeonse" placeholder="예: 300,000,000">

<label>자녀수(명)</label>
<input type="number" id="children" min="0" placeholder="예: 1">

<label>금리우대 (중복 불가)</label>
<div class="chk"><input type="checkbox" id="basic"> 기초생활수급·차상위 (소득 ≤ 4천)</div>
<div class="chk"><input type="checkbox" id="single"> 한부모가구 (소득 ≤ 5천)</div>
<div class="chk"><input type="checkbox" id="weak"> 장애인·다문화·노인부양·고령자가구</div>

<label>추가우대금리 (중복 가능)</label>
<div class="chk"><input type="checkbox" id="rent"> 월세대출 성실납부</div>
<div class="chk"><input type="checkbox" id="econtract"> 부동산 전자계약</div>
<div class="chk"><input type="checkbox" id="young"> 만 25세 미만 단독세대주</div>
<div class="chk"><input type="checkbox" id="company"> 중소기업 취업·창업 청년</div>
<div class="chk"><input type="checkbox" id="thirty"> 대출금액 30% 이하</div>
<div class="chk"><input type="checkbox" id="local"> 지방 소재 주택</div>

<button onclick="calc()">계산하기</button>

<div class="warn" id="warn"></div>

<div class="result" id="result" style="display:none">
  <div>월 이자금액: <b id="interest"></b></div>
  <div>기존 금리: <b id="baseRate"></b></div>
  <div>우대금리 합계: <b id="discount"></b></div>
  <div>최종 금리: <b id="finalRate"></b></div>
  <div>본인 투입금액: <b id="selfMoney"></b></div>
  <div class="small" id="detail"></div>
</div>
</div>

<script>
const WEB_APP_URL = "https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLj6GRxx6W5LXtTXdu_TPVp-HglxTwKDif3TyRJpzpu1nq2jnDsY8IlH4NkTU8mKGXbBszjjXaPf-YGkhiT9WpYJJvjczDP9IbBMr1WHj1y1_Q_hLocYl_cQ8pfA4QNiX3LjBPXOARuq4kodVhHYdx_JyK94TqWQC4yoAQBLc8gtCH2TEmxE2W8VpeteYXmeAN5SJSVizGD3ZACokcnHOU3BBGTXIM9UqyRejZqu41G9MWSTERHwEwuuaV-JAe_PSLS7fWslrNBVkvx-S2_SI589wST5XQ&lib=McujhMwZSXAj5r31WpYZO14Lq-ofEAQ5F";

function comma(n){return Number(n).toLocaleString("ko-KR")}
function onlyNum(el){el.value=el.value.replace(/[^0-9]/g,"");if(el.value)el.value=comma(el.value)}
income.oninput=e=>onlyNum(e.target)
jeonse.oninput=e=>onlyNum(e.target)

async function calc(){
  warn.innerText=""; result.style.display="none"

  const incomeVal=Number(income.value.replace(/,/g,""))
  const jeonseVal=Number(jeonse.value.replace(/,/g,""))
  const child=Number(children.value||0)

  if(incomeVal>75000000||jeonseVal>300000000){
    warn.innerText="연소득 7,500만원 또는 전세금 3억원 초과 시 계산 불가"
    return
  }

  try{
    const res=await fetch(WEB_APP_URL)
    const data=await res.json()
    let base=data.baseRate
    let discount=0
    let applied=[],excluded=[]

    // 중복불가 그룹
    let candidates=[]
    if(basic.checked && incomeVal<=40000000) candidates.push({v:1.0,t:"기초·차상위"})
    else if(basic.checked) excluded.push("기초·차상위(소득초과)")
    if(single.checked && incomeVal<=50000000) candidates.push({v:1.0,t:"한부모"})
    else if(single.checked) excluded.push("한부모(소득초과)")
    if(weak.checked) candidates.push({v:0.2,t:"취약가구"})
    if(child>=1){
      const v=child===1?0.3:child===2?0.5:0.7
      candidates.push({v:v,t:`다자녀(${child}명)`})
    }
    if(candidates.length){
      candidates.sort((a,b)=>b.v-a.v)
      discount+=candidates[0].v
      applied.push(candidates[0].t)
    }

    // 추가우대
    if(rent.checked){discount+=0.2;applied.push("월세 성실납부")}
    if(econtract.checked){discount+=0.1;applied.push("전자계약")}
    if(young.checked){discount+=0.3;applied.push("25세 미만 단독")}
    if(company.checked){discount+=0.3;applied.push("중소기업 청년")}
    if(thirty.checked){discount+=0.2;applied.push("대출 30% 이하")}
    if(local.checked){discount+=0.2;applied.push("지방 주택")}

    // 상한
    let max=0.5
    if(applied.includes("기초·차상위")||applied.includes("한부모")) max=1.0
    else if(child>=1) max=0.7
    discount=Math.min(discount,max)

    let final=base-discount
    if(final<1.0) final=1.0

    const loan=jeonseVal*0.8
    const selfMoneyCalc = jeonseVal - loan
    const monthly=Math.floor((loan*(final/100))/12)

    interest.innerText=comma(monthly)+"원"
    baseRate.innerText=base.toFixed(1)+"%"
    finalRate.innerText=final.toFixed(1)+"%"
    discountElem().innerText=discount.toFixed(1)+"%p"
    selfMoney.innerText = comma(selfMoneyCalc) + "원"
    detail.innerText="적용: "+applied.join(", ")

    result.style.display="block"
  }catch(e){
    warn.innerText="계산 중 오류가 발생했습니다."
  }
}
function discountElem(){return document.getElementById("discount")}
</script>
</body>
</html>



